#!/bin/sh

set -e

CURRENT_DIR="$(dirname "${0:-}")"
BUILDPACK_HOME="$(cd "$CURRENT_DIR/.." || exit; pwd)"

# shellcheck source=lib/all.sh
. "$BUILDPACK_HOME/lib/all.sh"

BUILD_DIR="${1:-}"
CACHE_DIR="${2:-}"

cd "${BUILD_DIR}"

download "" "${CACHE_DIR}"
verify_checksum "${CACHE_DIR}"
compile "${BUILD_DIR}" "${CACHE_DIR}"
install "${BUILD_DIR}" "${CACHE_DIR}"
cleanup
